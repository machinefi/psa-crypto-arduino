<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSA Crypto: Key attributes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSA Crypto
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Key attributes</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gab930304ccac92e0729fb5535c87a9fc2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__attributes.html#gab930304ccac92e0729fb5535c87a9fc2">PSA_DH_FAMILY_CUSTOM</a>&#160;&#160;&#160;((<a class="el" href="group__crypto__types.html#gaf632c5b13aa19c98f8591d4beda8dd1a">psa_dh_family_t</a>)0x7e)</td></tr>
<tr class="separator:gab930304ccac92e0729fb5535c87a9fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59089e39970e89191105bd3b3294c3bd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__attributes.html#ga59089e39970e89191105bd3b3294c3bd">PSA_KEY_DOMAIN_PARAMETERS_SIZE</a>(key_type,  key_bits)</td></tr>
<tr class="separator:ga59089e39970e89191105bd3b3294c3bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed9958b794fe397162846865ee894061"><td class="memItemLeft" align="right" valign="top"><a id="gaed9958b794fe397162846865ee894061"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PSA_DH_KEY_DOMAIN_PARAMETERS_SIZE</b>(key_bits)&#160;&#160;&#160;	(4 + (PSA_BITS_TO_BYTES(key_bits) + 5) * 3 /*without optional parts*/)</td></tr>
<tr class="separator:gaed9958b794fe397162846865ee894061"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab136f0c59eaee9b12752ce125c076188"><td class="memItemLeft" align="right" valign="top"><a id="gab136f0c59eaee9b12752ce125c076188"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PSA_DSA_KEY_DOMAIN_PARAMETERS_SIZE</b>(key_bits)&#160;&#160;&#160;	(4 + (PSA_BITS_TO_BYTES(key_bits) + 5) * 2 /*p, g*/ + 34 /*q*/)</td></tr>
<tr class="separator:gab136f0c59eaee9b12752ce125c076188"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga8eedc0a49d58b566770c81a1a617f63e"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structpsa__client__key__attributes__s.html">psa_client_key_attributes_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__attributes.html#ga8eedc0a49d58b566770c81a1a617f63e">psa_key_attributes_t</a></td></tr>
<tr class="separator:ga8eedc0a49d58b566770c81a1a617f63e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ec645e1fdafe59d591104451ebf5680"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structpsa__key__attributes__s.html">psa_key_attributes_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__attributes.html#ga0ec645e1fdafe59d591104451ebf5680">psa_key_attributes_t</a></td></tr>
<tr class="separator:ga0ec645e1fdafe59d591104451ebf5680"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8e70d36a3db2ec34425722166f5fa75b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__attributes.html#ga8e70d36a3db2ec34425722166f5fa75b">psa_get_key_attributes</a> (<a class="el" href="group__key__lifetimes.html#ga11e986351c65bd3dc3c0fe2cd9926e4b">psa_key_id_t</a> key, <a class="el" href="group__attributes.html#ga8eedc0a49d58b566770c81a1a617f63e">psa_key_attributes_t</a> *attributes)</td></tr>
<tr class="separator:ga8e70d36a3db2ec34425722166f5fa75b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga382b7f11fc6d706645cefea22c3bd458"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes</a> (<a class="el" href="group__attributes.html#ga8eedc0a49d58b566770c81a1a617f63e">psa_key_attributes_t</a> *attributes)</td></tr>
<tr class="separator:ga382b7f11fc6d706645cefea22c3bd458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8909d3f2ee48121ea0dff198276bdd38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__attributes.html#ga8909d3f2ee48121ea0dff198276bdd38">psa_set_key_domain_parameters</a> (<a class="el" href="group__attributes.html#ga8eedc0a49d58b566770c81a1a617f63e">psa_key_attributes_t</a> *attributes, <a class="el" href="group__crypto__types.html#ga63fce6880ca5933b5d6baa257febf1f6">psa_key_type_t</a> type, const uint8_t *data, size_t data_length)</td></tr>
<tr class="memdesc:ga8909d3f2ee48121ea0dff198276bdd38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set domain parameters for a key.  <a href="group__attributes.html#ga8909d3f2ee48121ea0dff198276bdd38">More...</a><br /></td></tr>
<tr class="separator:ga8909d3f2ee48121ea0dff198276bdd38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae42b480d8ffa161eb2a0a3e391010347"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__attributes.html#gae42b480d8ffa161eb2a0a3e391010347">psa_get_key_domain_parameters</a> (const <a class="el" href="group__attributes.html#ga8eedc0a49d58b566770c81a1a617f63e">psa_key_attributes_t</a> *attributes, uint8_t *data, size_t data_size, size_t *data_length)</td></tr>
<tr class="memdesc:gae42b480d8ffa161eb2a0a3e391010347"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get domain parameters for a key.  <a href="group__attributes.html#gae42b480d8ffa161eb2a0a3e391010347">More...</a><br /></td></tr>
<tr class="separator:gae42b480d8ffa161eb2a0a3e391010347"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gab930304ccac92e0729fb5535c87a9fc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab930304ccac92e0729fb5535c87a9fc2">&#9670;&nbsp;</a></span>PSA_DH_FAMILY_CUSTOM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PSA_DH_FAMILY_CUSTOM&#160;&#160;&#160;((<a class="el" href="group__crypto__types.html#gaf632c5b13aa19c98f8591d4beda8dd1a">psa_dh_family_t</a>)0x7e)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Custom Diffie-Hellman group.</p>
<p>For keys of type <a class="el" href="group__crypto__types.html#gaa22f0f2ea89b929f2fadc19890cc5d5c">PSA_KEY_TYPE_DH_PUBLIC_KEY</a>(<a class="el" href="group__attributes.html#gab930304ccac92e0729fb5535c87a9fc2">PSA_DH_FAMILY_CUSTOM</a>) or <a class="el" href="group__crypto__types.html#gab4f857c4cd56f5fe65ded421e61bcc8c">PSA_KEY_TYPE_DH_KEY_PAIR</a>(<a class="el" href="group__attributes.html#gab930304ccac92e0729fb5535c87a9fc2">PSA_DH_FAMILY_CUSTOM</a>), the group data comes from domain parameters set by <a class="el" href="group__attributes.html#ga8909d3f2ee48121ea0dff198276bdd38" title="Set domain parameters for a key.">psa_set_key_domain_parameters()</a>. </p>

</div>
</div>
<a id="ga59089e39970e89191105bd3b3294c3bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga59089e39970e89191105bd3b3294c3bd">&#9670;&nbsp;</a></span>PSA_KEY_DOMAIN_PARAMETERS_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PSA_KEY_DOMAIN_PARAMETERS_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">key_type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">key_bits&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    (<a class="code" href="group__crypto__types.html#ga0e1d8f241228e49c9cadadfb4579ef1a">PSA_KEY_TYPE_IS_RSA</a>(key_type) ? <span class="keyword">sizeof</span>(int) :                                                 \</div>
<div class="line">     <a class="code" href="group__crypto__types.html#ga248ae35c0e2becaebbf479fc1c3a3b0e">PSA_KEY_TYPE_IS_DH</a>(key_type)  ? PSA_DH_KEY_DOMAIN_PARAMETERS_SIZE(key_bits) :                 \</div>
<div class="line">     <a class="code" href="group__crypto__types.html#ga273fdfcf23eb0624f8b63d2321cf95c1">PSA_KEY_TYPE_IS_DSA</a>(key_type) ? PSA_DSA_KEY_DOMAIN_PARAMETERS_SIZE(key_bits) :                \</div>
<div class="line">                                       0)</div>
<div class="ttc" id="agroup__crypto__types_html_ga0e1d8f241228e49c9cadadfb4579ef1a"><div class="ttname"><a href="group__crypto__types.html#ga0e1d8f241228e49c9cadadfb4579ef1a">PSA_KEY_TYPE_IS_RSA</a></div><div class="ttdeci">#define PSA_KEY_TYPE_IS_RSA(type)</div><div class="ttdef"><b>Definition:</b> crypto_values.h:497</div></div>
<div class="ttc" id="agroup__crypto__types_html_ga248ae35c0e2becaebbf479fc1c3a3b0e"><div class="ttname"><a href="group__crypto__types.html#ga248ae35c0e2becaebbf479fc1c3a3b0e">PSA_KEY_TYPE_IS_DH</a></div><div class="ttdeci">#define PSA_KEY_TYPE_IS_DH(type)</div><div class="ttdef"><b>Definition:</b> crypto_values.h:645</div></div>
<div class="ttc" id="agroup__crypto__types_html_ga273fdfcf23eb0624f8b63d2321cf95c1"><div class="ttname"><a href="group__crypto__types.html#ga273fdfcf23eb0624f8b63d2321cf95c1">PSA_KEY_TYPE_IS_DSA</a></div><div class="ttdeci">#define PSA_KEY_TYPE_IS_DSA(type)</div><div class="ttdef"><b>Definition:</b> crypto_extra.h:330</div></div>
</div><!-- fragment --><p>Safe output buffer size for <a class="el" href="group__attributes.html#gae42b480d8ffa161eb2a0a3e391010347" title="Get domain parameters for a key.">psa_get_key_domain_parameters()</a>.</p>
<p>This macro returns a compile-time constant if its arguments are compile-time constants.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function may call its arguments multiple times or zero times, so you should not pass arguments that contain side effects.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This is an experimental extension to the interface. It may change in future versions of the library.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key_type</td><td>A supported key type. </td></tr>
    <tr><td class="paramname">key_bits</td><td>The size of the key in bits.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the parameters are valid and supported, return a buffer size in bytes that guarantees that <a class="el" href="group__attributes.html#gae42b480d8ffa161eb2a0a3e391010347" title="Get domain parameters for a key.">psa_get_key_domain_parameters()</a> will not fail with <a class="el" href="group__error.html#ga695025f4ec11249aee7ea3d0f65e01c8">PSA_ERROR_BUFFER_TOO_SMALL</a>. If the parameters are a valid combination that is not supported by the implementation, this macro shall return either a sensible size or 0. If the parameters are not valid, the return value is unspecified. </dd></dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga8eedc0a49d58b566770c81a1a617f63e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8eedc0a49d58b566770c81a1a617f63e">&#9670;&nbsp;</a></span>psa_key_attributes_t <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structpsa__client__key__attributes__s.html">psa_client_key_attributes_s</a> <a class="el" href="group__attributes.html#ga8eedc0a49d58b566770c81a1a617f63e">psa_key_attributes_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The type of a structure containing key attributes.</p>
<p>This is an opaque structure that can represent the metadata of a key object. Metadata that can be stored in attributes includes:</p><ul>
<li>The location of the key in storage, indicated by its key identifier and its lifetime.</li>
<li>The key's policy, comprising usage flags and a specification of the permitted algorithm(s).</li>
<li>Information about the key itself: the key type and its size.</li>
<li>Additional implementation-defined attributes.</li>
</ul>
<p>The actual key material is not considered an attribute of a key. Key attributes do not contain information that is generally considered highly confidential.</p>
<p>An attribute structure works like a simple data structure where each function <code>psa_set_key_xxx</code> sets a field and the corresponding function <code>psa_get_key_xxx</code> retrieves the value of the corresponding field. However, a future version of the library may report values that are equivalent to the original one, but have a different encoding. Invalid values may be mapped to different, also invalid values.</p>
<p>An attribute structure may contain references to auxiliary resources, for example pointers to allocated memory or indirect references to pre-calculated values. In order to free such resources, the application must call <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a>. As an exception, calling <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a> on an attribute structure is optional if the structure has only been modified by the following functions since it was initialized or last reset with <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a>:</p><ul>
<li>psa_set_key_id()</li>
<li>psa_set_key_lifetime()</li>
<li>psa_set_key_type()</li>
<li>psa_set_key_bits()</li>
<li>psa_set_key_usage_flags()</li>
<li>psa_set_key_algorithm()</li>
</ul>
<p>Before calling any function on a key attribute structure, the application must initialize it by any of the following means:</p><ul>
<li>Set the structure to all-bits-zero, for example: <div class="fragment"><div class="line"><a class="code" href="structpsa__client__key__attributes__s.html">psa_key_attributes_t</a> attributes;</div>
<div class="line">memset(&amp;attributes, 0, <span class="keyword">sizeof</span>(attributes));</div>
<div class="ttc" id="astructpsa__client__key__attributes__s_html"><div class="ttname"><a href="structpsa__client__key__attributes__s.html">psa_client_key_attributes_s</a></div><div class="ttdef"><b>Definition:</b> crypto_client_struct.h:34</div></div>
</div><!-- fragment --></li>
<li>Initialize the structure to logical zero values, for example: <div class="fragment"><div class="line"><a class="code" href="structpsa__client__key__attributes__s.html">psa_key_attributes_t</a> attributes = {0};</div>
</div><!-- fragment --></li>
<li>Initialize the structure to the initializer #PSA_KEY_ATTRIBUTES_INIT, for example: <div class="fragment"><div class="line"><a class="code" href="structpsa__client__key__attributes__s.html">psa_key_attributes_t</a> attributes = PSA_KEY_ATTRIBUTES_INIT;</div>
</div><!-- fragment --></li>
<li>Assign the result of the function psa_key_attributes_init() to the structure, for example: <div class="fragment"><div class="line"><a class="code" href="structpsa__client__key__attributes__s.html">psa_key_attributes_t</a> attributes;</div>
<div class="line">attributes = psa_key_attributes_init();</div>
</div><!-- fragment --></li>
</ul>
<p>A freshly initialized attribute structure contains the following values:</p>
<ul>
<li>lifetime: <a class="el" href="group__key__lifetimes.html#ga8b438870ba69489b685730d346455108">PSA_KEY_LIFETIME_VOLATILE</a>.</li>
<li>key identifier: 0 (which is not a valid key identifier).</li>
<li>type: <code>0</code> (meaning that the type is unspecified).</li>
<li>key size: <code>0</code> (meaning that the size is unspecified).</li>
<li>usage flags: <code>0</code> (which allows no usage except exporting a public key).</li>
<li>algorithm: <code>0</code> (which allows no cryptographic usage, but allows exporting).</li>
</ul>
<p>A typical sequence to create a key is as follows:</p><ol type="1">
<li>Create and initialize an attribute structure.</li>
<li>If the key is persistent, call psa_set_key_id(). Also call psa_set_key_lifetime() to place the key in a non-default location.</li>
<li>Set the key policy with psa_set_key_usage_flags() and psa_set_key_algorithm().</li>
<li>Set the key type with psa_set_key_type(). Skip this step if copying an existing key with <a class="el" href="group__key__management.html#ga78da90274bd8f8680017a4bb513803a1">psa_copy_key()</a>.</li>
<li>When generating a random key with <a class="el" href="group__random.html#ga950b4199ae7a0164006bd3d6927d1efe" title="Generate a key or key pair.">psa_generate_key()</a> or deriving a key with <a class="el" href="group__key__derivation.html#gad286b675f3f8b46fa6cab620de6bead3">psa_key_derivation_output_key()</a>, set the desired key size with psa_set_key_bits().</li>
<li>Call a key creation function: <a class="el" href="group__import__export.html#gad088d8ebc854d2f7a5b5c1769bc9ed40" title="Import a key in binary format.">psa_import_key()</a>, <a class="el" href="group__random.html#ga950b4199ae7a0164006bd3d6927d1efe" title="Generate a key or key pair.">psa_generate_key()</a>, <a class="el" href="group__key__derivation.html#gad286b675f3f8b46fa6cab620de6bead3">psa_key_derivation_output_key()</a> or <a class="el" href="group__key__management.html#ga78da90274bd8f8680017a4bb513803a1">psa_copy_key()</a>. This function reads the attribute structure, creates a key with these attributes, and outputs a key identifier to the newly created key.</li>
<li>The attribute structure is now no longer necessary. You may call <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a>, although this is optional with the workflow presented here because the attributes currently defined in this specification do not require any additional resources beyond the structure itself.</li>
</ol>
<p>A typical sequence to query a key's attributes is as follows:</p><ol type="1">
<li>Call <a class="el" href="group__attributes.html#ga8e70d36a3db2ec34425722166f5fa75b">psa_get_key_attributes()</a>.</li>
<li>Call <code>psa_get_key_xxx</code> functions to retrieve the attribute(s) that you are interested in.</li>
<li>Call <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a> to free any resources that may be used by the attribute structure.</li>
</ol>
<p>Once a key has been created, it is impossible to change its attributes. </p>

</div>
</div>
<a id="ga0ec645e1fdafe59d591104451ebf5680"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0ec645e1fdafe59d591104451ebf5680">&#9670;&nbsp;</a></span>psa_key_attributes_t <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structpsa__key__attributes__s.html">psa_key_attributes_s</a> <a class="el" href="group__attributes.html#ga8eedc0a49d58b566770c81a1a617f63e">psa_key_attributes_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The type of a structure containing key attributes.</p>
<p>This is an opaque structure that can represent the metadata of a key object. Metadata that can be stored in attributes includes:</p><ul>
<li>The location of the key in storage, indicated by its key identifier and its lifetime.</li>
<li>The key's policy, comprising usage flags and a specification of the permitted algorithm(s).</li>
<li>Information about the key itself: the key type and its size.</li>
<li>Additional implementation-defined attributes.</li>
</ul>
<p>The actual key material is not considered an attribute of a key. Key attributes do not contain information that is generally considered highly confidential.</p>
<p>An attribute structure works like a simple data structure where each function <code>psa_set_key_xxx</code> sets a field and the corresponding function <code>psa_get_key_xxx</code> retrieves the value of the corresponding field. However, a future version of the library may report values that are equivalent to the original one, but have a different encoding. Invalid values may be mapped to different, also invalid values.</p>
<p>An attribute structure may contain references to auxiliary resources, for example pointers to allocated memory or indirect references to pre-calculated values. In order to free such resources, the application must call <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a>. As an exception, calling <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a> on an attribute structure is optional if the structure has only been modified by the following functions since it was initialized or last reset with <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a>:</p><ul>
<li>psa_set_key_id()</li>
<li>psa_set_key_lifetime()</li>
<li>psa_set_key_type()</li>
<li>psa_set_key_bits()</li>
<li>psa_set_key_usage_flags()</li>
<li>psa_set_key_algorithm()</li>
</ul>
<p>Before calling any function on a key attribute structure, the application must initialize it by any of the following means:</p><ul>
<li>Set the structure to all-bits-zero, for example: <div class="fragment"><div class="line"><a class="code" href="structpsa__client__key__attributes__s.html">psa_key_attributes_t</a> attributes;</div>
<div class="line">memset(&amp;attributes, 0, <span class="keyword">sizeof</span>(attributes));</div>
</div><!-- fragment --></li>
<li>Initialize the structure to logical zero values, for example: <div class="fragment"><div class="line"><a class="code" href="structpsa__client__key__attributes__s.html">psa_key_attributes_t</a> attributes = {0};</div>
</div><!-- fragment --></li>
<li>Initialize the structure to the initializer #PSA_KEY_ATTRIBUTES_INIT, for example: <div class="fragment"><div class="line"><a class="code" href="structpsa__client__key__attributes__s.html">psa_key_attributes_t</a> attributes = PSA_KEY_ATTRIBUTES_INIT;</div>
</div><!-- fragment --></li>
<li>Assign the result of the function psa_key_attributes_init() to the structure, for example: <div class="fragment"><div class="line"><a class="code" href="structpsa__client__key__attributes__s.html">psa_key_attributes_t</a> attributes;</div>
<div class="line">attributes = psa_key_attributes_init();</div>
</div><!-- fragment --></li>
</ul>
<p>A freshly initialized attribute structure contains the following values:</p>
<ul>
<li>lifetime: <a class="el" href="group__key__lifetimes.html#ga8b438870ba69489b685730d346455108">PSA_KEY_LIFETIME_VOLATILE</a>.</li>
<li>key identifier: 0 (which is not a valid key identifier).</li>
<li>type: <code>0</code> (meaning that the type is unspecified).</li>
<li>key size: <code>0</code> (meaning that the size is unspecified).</li>
<li>usage flags: <code>0</code> (which allows no usage except exporting a public key).</li>
<li>algorithm: <code>0</code> (which allows no cryptographic usage, but allows exporting).</li>
</ul>
<p>A typical sequence to create a key is as follows:</p><ol type="1">
<li>Create and initialize an attribute structure.</li>
<li>If the key is persistent, call psa_set_key_id(). Also call psa_set_key_lifetime() to place the key in a non-default location.</li>
<li>Set the key policy with psa_set_key_usage_flags() and psa_set_key_algorithm().</li>
<li>Set the key type with psa_set_key_type(). Skip this step if copying an existing key with <a class="el" href="group__key__management.html#ga78da90274bd8f8680017a4bb513803a1">psa_copy_key()</a>.</li>
<li>When generating a random key with <a class="el" href="group__random.html#ga950b4199ae7a0164006bd3d6927d1efe" title="Generate a key or key pair.">psa_generate_key()</a> or deriving a key with <a class="el" href="group__key__derivation.html#gad286b675f3f8b46fa6cab620de6bead3">psa_key_derivation_output_key()</a>, set the desired key size with psa_set_key_bits().</li>
<li>Call a key creation function: <a class="el" href="group__import__export.html#gad088d8ebc854d2f7a5b5c1769bc9ed40" title="Import a key in binary format.">psa_import_key()</a>, <a class="el" href="group__random.html#ga950b4199ae7a0164006bd3d6927d1efe" title="Generate a key or key pair.">psa_generate_key()</a>, <a class="el" href="group__key__derivation.html#gad286b675f3f8b46fa6cab620de6bead3">psa_key_derivation_output_key()</a> or <a class="el" href="group__key__management.html#ga78da90274bd8f8680017a4bb513803a1">psa_copy_key()</a>. This function reads the attribute structure, creates a key with these attributes, and outputs a key identifier to the newly created key.</li>
<li>The attribute structure is now no longer necessary. You may call <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a>, although this is optional with the workflow presented here because the attributes currently defined in this specification do not require any additional resources beyond the structure itself.</li>
</ol>
<p>A typical sequence to query a key's attributes is as follows:</p><ol type="1">
<li>Call <a class="el" href="group__attributes.html#ga8e70d36a3db2ec34425722166f5fa75b">psa_get_key_attributes()</a>.</li>
<li>Call <code>psa_get_key_xxx</code> functions to retrieve the attribute(s) that you are interested in.</li>
<li>Call <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a> to free any resources that may be used by the attribute structure.</li>
</ol>
<p>Once a key has been created, it is impossible to change its attributes. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8e70d36a3db2ec34425722166f5fa75b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e70d36a3db2ec34425722166f5fa75b">&#9670;&nbsp;</a></span>psa_get_key_attributes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_get_key_attributes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__key__lifetimes.html#ga11e986351c65bd3dc3c0fe2cd9926e4b">psa_key_id_t</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__attributes.html#ga8eedc0a49d58b566770c81a1a617f63e">psa_key_attributes_t</a> *&#160;</td>
          <td class="paramname"><em>attributes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve the attributes of a key.</p>
<p>This function first resets the attribute structure as with <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a>. It then copies the attributes of the given key into the given attribute structure.</p>
<dl class="section note"><dt>Note</dt><dd>This function may allocate memory or other resources. Once you have called this function on an attribute structure, you must call <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a> to free these resources.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Identifier of the key to query. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">attributes</td><td>On success, the attributes of the key. On failure, equivalent to a freshly-initialized structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error.html#ga4cc859e2c66ca381c7418db3527a65e1">PSA_SUCCESS</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#gadf22718935657c2c3168c228204085f9">PSA_ERROR_INVALID_HANDLE</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga91b2ad8a867517a2651f1b076c5216e5">PSA_ERROR_INSUFFICIENT_MEMORY</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga5cdb6948371d49e916106249020ea3f7">PSA_ERROR_COMMUNICATION_FAILURE</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga116f4d4c6a9d9db3397991a8472d8950">PSA_ERROR_CORRUPTION_DETECTED</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#gadd169a1af2707862b95fb9df91dfc37d">PSA_ERROR_STORAGE_FAILURE</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga9febb81a44bdeb4c6c42bf4f697b13bf">PSA_ERROR_DATA_CORRUPT</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#gacebfbd25a7c2a727694fb57182a66533">PSA_ERROR_DATA_INVALID</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga933d40fa2a591004f2e93aa91e11db84">PSA_ERROR_BAD_STATE</a></td><td>The library has not been previously initialized by <a class="el" href="group__initialization.html#ga2de150803fc2f7dc6101d5af7e921dd9" title="Library initialization.">psa_crypto_init()</a>. It is implementation-dependent whether a failure to initialize results in this error code. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae42b480d8ffa161eb2a0a3e391010347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae42b480d8ffa161eb2a0a3e391010347">&#9670;&nbsp;</a></span>psa_get_key_domain_parameters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_get_key_domain_parameters </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__attributes.html#ga8eedc0a49d58b566770c81a1a617f63e">psa_key_attributes_t</a> *&#160;</td>
          <td class="paramname"><em>attributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>data_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get domain parameters for a key. </p>
<p>Get the domain parameters for a key with this function, if any. The format of the domain parameters written to <code>data</code> is specified in the documentation for <a class="el" href="group__attributes.html#ga8909d3f2ee48121ea0dff198276bdd38" title="Set domain parameters for a key.">psa_set_key_domain_parameters()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This is an experimental extension to the interface. It may change in future versions of the library.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">attributes</td><td>The key attribute structure to query. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>On success, the key domain parameters. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">data_size</td><td>Size of the <code>data</code> buffer in bytes. The buffer is guaranteed to be large enough if its size in bytes is at least the value given by <a class="el" href="group__attributes.html#ga59089e39970e89191105bd3b3294c3bd">PSA_KEY_DOMAIN_PARAMETERS_SIZE()</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data_length</td><td>On success, the number of bytes that make up the key domain parameters data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error.html#ga4cc859e2c66ca381c7418db3527a65e1">PSA_SUCCESS</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga695025f4ec11249aee7ea3d0f65e01c8">PSA_ERROR_BUFFER_TOO_SMALL</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga382b7f11fc6d706645cefea22c3bd458"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga382b7f11fc6d706645cefea22c3bd458">&#9670;&nbsp;</a></span>psa_reset_key_attributes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void psa_reset_key_attributes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__attributes.html#ga8eedc0a49d58b566770c81a1a617f63e">psa_key_attributes_t</a> *&#160;</td>
          <td class="paramname"><em>attributes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset a key attribute structure to a freshly initialized state.</p>
<p>You must initialize the attribute structure as described in the documentation of the type <a class="el" href="group__attributes.html#ga0ec645e1fdafe59d591104451ebf5680">psa_key_attributes_t</a> before calling this function. Once the structure has been initialized, you may call this function at any time.</p>
<p>This function frees any auxiliary resources that the structure may contain.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">attributes</td><td>The attribute structure to reset. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8909d3f2ee48121ea0dff198276bdd38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8909d3f2ee48121ea0dff198276bdd38">&#9670;&nbsp;</a></span>psa_set_key_domain_parameters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_set_key_domain_parameters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__attributes.html#ga8eedc0a49d58b566770c81a1a617f63e">psa_key_attributes_t</a> *&#160;</td>
          <td class="paramname"><em>attributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__crypto__types.html#ga63fce6880ca5933b5d6baa257febf1f6">psa_key_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set domain parameters for a key. </p>
<p>Some key types require additional domain parameters in addition to the key type identifier and the key size. Use this function instead of psa_set_key_type() when you need to specify domain parameters.</p>
<p>The format for the required domain parameters varies based on the key type.</p>
<ul>
<li>For RSA keys (<a class="el" href="group__crypto__types.html#ga9ba0878f56c8bcd1995ac017a74f513b">PSA_KEY_TYPE_RSA_PUBLIC_KEY</a> or <a class="el" href="group__crypto__types.html#ga11745b110166e927e2abeabc7d532051">PSA_KEY_TYPE_RSA_KEY_PAIR</a>), the domain parameter data consists of the public exponent, represented as a big-endian integer with no leading zeros. This information is used when generating an RSA key pair. When importing a key, the public exponent is read from the imported key data and the exponent recorded in the attribute structure is ignored. As an exception, the public exponent 65537 is represented by an empty byte string.</li>
<li>For DSA keys (<a class="el" href="group__crypto__types.html#ga5e7439c2905136366c3a876e62e5ddfc">PSA_KEY_TYPE_DSA_PUBLIC_KEY</a> or <a class="el" href="group__crypto__types.html#ga7d4a45c147cb0ecb55d01d9c04bfed76">PSA_KEY_TYPE_DSA_KEY_PAIR</a>), the <code>Dss-Params</code> format as defined by RFC 3279 &sect;2.3.2. <div class="fragment"><div class="line">Dss-Params ::= SEQUENCE  {</div>
<div class="line">   p       INTEGER,</div>
<div class="line">   q       INTEGER,</div>
<div class="line">   g       INTEGER</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>For Diffie-Hellman key exchange keys (<a class="el" href="group__crypto__types.html#gaa22f0f2ea89b929f2fadc19890cc5d5c">PSA_KEY_TYPE_DH_PUBLIC_KEY</a>(<a class="el" href="group__attributes.html#gab930304ccac92e0729fb5535c87a9fc2">PSA_DH_FAMILY_CUSTOM</a>) or <a class="el" href="group__crypto__types.html#gab4f857c4cd56f5fe65ded421e61bcc8c">PSA_KEY_TYPE_DH_KEY_PAIR</a>(<a class="el" href="group__attributes.html#gab930304ccac92e0729fb5535c87a9fc2">PSA_DH_FAMILY_CUSTOM</a>)), the <code>DomainParameters</code> format as defined by RFC 3279 &sect;2.3.3. <div class="fragment"><div class="line">DomainParameters ::= SEQUENCE {</div>
<div class="line">   p               INTEGER,                    -- odd prime, p=jq +1</div>
<div class="line">   g               INTEGER,                    -- generator, g</div>
<div class="line">   q               INTEGER,                    -- factor of p-1</div>
<div class="line">   j               INTEGER OPTIONAL,           -- subgroup factor</div>
<div class="line">   validationParams ValidationParams OPTIONAL</div>
<div class="line">}</div>
<div class="line">ValidationParams ::= SEQUENCE {</div>
<div class="line">   seed            BIT STRING,</div>
<div class="line">   pgenCounter     INTEGER</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
<dl class="section note"><dt>Note</dt><dd>This function may allocate memory or other resources. Once you have called this function on an attribute structure, you must call <a class="el" href="group__attributes.html#ga382b7f11fc6d706645cefea22c3bd458">psa_reset_key_attributes()</a> to free these resources.</dd>
<dd>
This is an experimental extension to the interface. It may change in future versions of the library.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">attributes</td><td>Attribute structure where the specified domain parameters will be stored. If this function fails, the content of <code>attributes</code> is not modified. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">type</td><td>Key type (a <code>PSA_KEY_TYPE_XXX</code> value). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Buffer containing the key domain parameters. The content of this buffer is interpreted according to <code>type</code> as described above. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">data_length</td><td>Size of the <code>data</code> buffer in bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error.html#ga4cc859e2c66ca381c7418db3527a65e1">PSA_SUCCESS</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga798df25a505ebf931f7bec1f80f1f85f">PSA_ERROR_INVALID_ARGUMENT</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga1dcc6d130633ed5db8942257581b55dd">PSA_ERROR_NOT_SUPPORTED</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__error.html#ga91b2ad8a867517a2651f1b076c5216e5">PSA_ERROR_INSUFFICIENT_MEMORY</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
